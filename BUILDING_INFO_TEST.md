# 建物情報表示機能 - 動作確認手順

## テスト環境
- 開発サーバー: http://localhost:3001
- プリビューサーバー: http://localhost:4174

## 動作確認手順

### 1. ログイン
1. ブラウザで http://localhost:3001 または http://localhost:4174 にアクセス
2. デモアカウントでログイン:
   - Email: `doctor@demo.com`
   - Password: `demo123456`

### 2. 事案一覧で建物情報対応事案を確認
事案一覧で以下の事案を確認できることを確認:
- **case-001**: 渋谷駅前 交通外傷 (渋谷スカイの建物情報が表示される)
- **case-002**: 新宿区内 心肺停止 (新宿パークタワーの建物情報が表示される)
- **case-004**: 東京駅 転落事故 (東京駅の建物情報が表示される)

### 3. 建物情報機能のテスト

#### 3-1. 東京駅の事案 (case-004)
1. 「2024-12-14 東京駅 転落事故」をクリック
2. 事案詳細ページで以下を確認:
   - マップに東京駅が表示されている
   - 位置追跡コンポーネントの下に**建物情報セクション**が表示されている
   - 建物名: 「東京駅」
   - アクセシビリティバッジ: 「バリアフリー対応 (5/5)」
   - 建物種別: 「駅」
   - 階層: 「B4F-3F」
   - 緊急時連絡先が赤色で強調表示されている

3. 右上の展開ボタン (下向き矢印) をクリックして詳細情報を確認:

   **エレベーター情報**:
   - 丸の内中央口エレベーター (定員20人、車椅子対応、稼働中)
   - 八重洲中央口エレベーター (定員15人、車椅子対応、稼働中)

   **階段・エスカレーター情報**:
   - 丸の内北口階段 (一般階段、幅: 広い)
   - 八重洲南口階段 (一般階段、幅: 標準)

   **出入口情報**:
   - 丸の内中央口 (メイン出入口、バリアフリー対応)
   - 八重洲中央口 (メイン出入口、バリアフリー対応)
   - 丸の内北口 (メイン出入口、バリアフリー対応)
   - 近くの目印情報が緑色で表示されている

#### 3-2. 渋谷駅の事案 (case-001)
1. 戻るボタンで事案一覧に戻り、「2024-12-14 渋谷駅前 交通外傷」をクリック
2. 建物情報セクションで以下を確認:
   - 建物名: 「渋谷スカイ」
   - 建物種別: 「商業施設」
   - アクセシビリティバッジ: 「バリアフリー対応」
   - エレベーター・エスカレーター情報
   - JR渋谷駅直結の出入口情報

#### 3-3. 新宿の事案 (case-002)
1. 「2024-12-13 新宿区内 心肺停止」をクリック
2. 建物情報セクションで以下を確認:
   - 建物名: 「新宿パークタワー」
   - 建物種別: 「オフィスビル」
   - 52階建ての高層ビル情報
   - 低層用・高層用・非常用エレベーター情報
   - 非常階段情報

### 4. 期待される動作

#### 正常動作の確認項目
✅ 建物情報コンポーネントが事案詳細ページに表示される
✅ 現場の位置に基づいて適切な建物情報が取得・表示される
✅ アクセシビリティ情報が適切にバッジで表示される
✅ エレベーター、階段、出口の詳細情報が表示される
✅ 展開/折りたたみ機能が動作する
✅ 緊急時連絡先が強調表示される
✅ 距離と信頼度が表示される
✅ レスポンシブデザインが適用されている

#### エラー処理の確認
✅ 建物情報が見つからない場合の適切なメッセージ表示
✅ ローディング状態の表示
✅ エラー時の適切なフォールバック

### 5. ブラウザ開発者ツールでの確認
1. F12で開発者ツールを開く
2. Consoleタブで以下のログを確認:
   - 「Building service: Getting building info for location」
   - 建物情報の取得ログ
   - エラーがないことを確認

### 6. モバイル表示の確認
1. 開発者ツールでモバイル表示に切り替え
2. 建物情報コンポーネントがモバイルで適切に表示されることを確認

## トラブルシューティング

### 建物情報が表示されない場合
1. ブラウザのコンソールでエラーメッセージを確認
2. 事案の位置情報が正しく設定されているか確認
3. ページをリフレッシュして再試行

### コンポーネントが見つからない場合
1. マップコンポーネントの下、位置追跡コンポーネントの下を確認
2. 画面をスクロールして確認

## 実装詳細の確認ポイント
- 建物情報は200m以内の検索範囲で取得される
- デモモードでは東京駅、新宿パークタワー、渋谷スカイの3つの建物データを使用
- 実際の座標に基づいて距離計算が行われている
- TypeScriptの型安全性が確保されている