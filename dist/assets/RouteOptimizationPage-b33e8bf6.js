import{c as f,d as y,r as m,j as e,B as d,b as w}from"./index-0a82833a.js";import{u as k,R as L}from"./RouteOptimizationComponent-1a80bf7d.js";import"./emergencyHospitals-4754c14f.js";const A=()=>{var u;const N=f(),[i]=y(),{analytics:l,isLoading:g,refreshAnalytics:v}=k(),[a,o]=m.useState(null),[n,x]=m.useState(null);m.useEffect(()=>{const s=i.get("originLat"),t=i.get("originLon"),r=i.get("originName"),c=i.get("destLat"),j=i.get("destLon"),p=i.get("destName");s&&t&&o({latitude:parseFloat(s),longitude:parseFloat(t),name:r||"出発地"}),c&&j&&x({latitude:parseFloat(c),longitude:parseFloat(j),name:p||"目的地"})},[i]);const h=s=>{const t={latitude:35.701835,longitude:139.763417,name:s==="origin"?"東京ドクターカー基地":"東京医科歯科大学病院"};s==="origin"?o(t):x(t)},b=s=>{const t=Math.floor(s/60),r=Math.floor(t/60),c=t%60;return r>0?`${r}時間${c}分`:`${t}分`};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>N("/cases"),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"xROAD ルート最適化"}),e.jsx("p",{className:"text-sm text-gray-500",children:"リアルタイム交通データによる最適ルート検索"})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx(d,{size:"sm",variant:"outline",onClick:v,disabled:g,children:"📊 分析更新"})})]})})}),e.jsx("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"px-4 py-6 sm:px-0",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"位置設定"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"出発地"}),a?e.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-green-900",children:a.name}),e.jsxs("div",{className:"text-sm text-green-600",children:[a.latitude.toFixed(4),", ",a.longitude.toFixed(4)]})]}),e.jsx(d,{size:"sm",variant:"outline",onClick:()=>o(null),children:"変更"})]})}):e.jsx(d,{onClick:()=>h("origin"),className:"w-full border-dashed border-2 border-gray-300 text-gray-600",variant:"outline",children:"📍 出発地を設定"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"目的地"}),n?e.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-blue-900",children:n.name}),e.jsxs("div",{className:"text-sm text-blue-600",children:[n.latitude.toFixed(4),", ",n.longitude.toFixed(4)]})]}),e.jsx(d,{size:"sm",variant:"outline",onClick:()=>x(null),children:"変更"})]})}):e.jsx(d,{onClick:()=>h("destination"),className:"w-full border-dashed border-2 border-gray-300 text-gray-600",variant:"outline",children:"🏥 目的地を設定"})]})]})]}),e.jsx(L,{currentLocation:a?{latitude:a.latitude,longitude:a.longitude}:void 0,onRouteSelected:s=>{console.log("Route selected:",s)},onNavigationStart:s=>{console.log("Navigation started:",s),alert("ナビゲーションアプリに連携しました")},className:"mb-6"}),l&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"xROAD活用実績"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-400 to-green-600 rounded-lg p-4 text-white",children:[e.jsx("div",{className:"text-sm opacity-90",children:"ルート最適化"}),e.jsx("div",{className:"text-2xl font-bold",children:l.totalRoutesOptimized}),e.jsx("div",{className:"text-sm opacity-90",children:"回実行"})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-400 to-blue-600 rounded-lg p-4 text-white",children:[e.jsx("div",{className:"text-sm opacity-90",children:"予測精度"}),e.jsxs("div",{className:"text-2xl font-bold",children:[Math.round(l.averageAccuracy*100),"%"]}),e.jsx("div",{className:"text-sm opacity-90",children:"平均精度"})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-400 to-purple-600 rounded-lg p-4 text-white",children:[e.jsx("div",{className:"text-sm opacity-90",children:"時間短縮"}),e.jsx("div",{className:"text-2xl font-bold",children:b(l.timeSaved)}),e.jsx("div",{className:"text-sm opacity-90",children:"累計短縮"})]}),e.jsxs("div",{className:"bg-gradient-to-r from-orange-400 to-orange-600 rounded-lg p-4 text-white",children:[e.jsx("div",{className:"text-sm opacity-90",children:"最適時間帯"}),e.jsxs("div",{className:"text-2xl font-bold",children:[((u=l.mostEfficientTimeSlots[0])==null?void 0:u.hour)||"--","時"]}),e.jsx("div",{className:"text-sm opacity-90",children:"最効率"})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-md font-medium text-gray-800 mb-4",children:"時間帯別効率性"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:l.mostEfficientTimeSlots.map((s,t)=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[s.hour,":00-",s.hour+1,":00"]}),e.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["平均速度: ",s.averageSpeed.toFixed(0),"km/h"]}),e.jsxs("div",{className:"text-xs text-gray-600",children:["信頼度: ",Math.round(s.reliability*100),"%"]}),e.jsx("div",{className:"mt-2",children:e.jsx("div",{className:"bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${s.reliability*100}%`}})})})]},t))})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-md font-medium text-gray-800 mb-4",children:"xROAD API統合状況"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"JARTIC交通量API"}),e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full",children:"🟢 接続中"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"DRM-PF ルート検索"}),e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full",children:"🟢 接続中"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"リアルタイム更新"}),e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:"🔄 5分間隔"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("div",{className:"font-medium mb-1",children:"対象エリア"}),e.jsx("div",{children:"東京都心部 6km × 6km"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("div",{className:"font-medium mb-1",children:"交通量観測点"}),e.jsx("div",{children:"約2,600地点（直轄国道）"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("div",{className:"font-medium mb-1",children:"データ更新"}),e.jsx("div",{children:"5分値（20分遅延）"})]})]})]})]})]}),g&&e.jsxs("div",{className:"flex justify-center py-8",children:[e.jsx(w,{size:"lg"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"分析データを読み込み中..."})]})]})})]})};export{A as RouteOptimizationPage};
//# sourceMappingURL=RouteOptimizationPage-b33e8bf6.js.map
